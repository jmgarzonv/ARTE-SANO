{% extends 'base.html' %}

{% block content %}
<h1>Bienvenido a la tienda de artesanías</h1>

<a href="{% url 'crear_producto' %}">Agregar Producto</a>

<h2>Lista de Productos</h2>

<ul>
    {% for producto in productos %}
        <li>
            <strong>{{ producto.titulo }}</strong> - ${{ producto.precio }}
            <p>{{ producto.descripcion }}</p>
            <p><strong>Stock:</strong> {{ producto.stock }} unidades</p>
            
            {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" alt="{{ producto.titulo }}" width="100">
            {% else %}
                <p>No hay imagen disponible</p>
            {% endif %}

            <a href="{% url 'eliminar_producto' producto.id %}">Eliminar</a>

            <!-- Formulario para comprar el producto -->
            <form action="{% url 'comprar_producto' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="producto_id" value="{{ producto.id }}">
                <label for="cantidad_{{ producto.id }}">Cantidad:</label>
                <input type="number" name="cantidad" id="cantidad_{{ producto.id }}" value="1" min="1" max="{{ producto.stock }}">
                <button type="submit">Comprar</button>
            </form>
            <form action="{% url 'agregar_al_carrito' producto.id %}" method="post">
                {% csrf_token %}
                <button type="submit">Añadir al carrito</button>
            </form>
            
        </li>
    {% endfor %}
</ul>

{% endblock %}
